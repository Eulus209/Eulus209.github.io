<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyberpunk Chat Interface</title>
    <!-- <link rel="stylesheet" href="styles.css"> -->
     <style>
        /* Global resets */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }

        body {
            background-color: #0a0f0d;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            color: #00ffcc;
            font-size: 16px;
        }

        /* Chat Container */
        .chat-container {
            width: 400px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ffcc;
            border-radius: 10px;
            box-shadow: 0px 0px 20px rgba(0, 255, 204, 0.5);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Chat Header */
        .chat-header {
            background-color: #001b1a;
            text-align: center;
            padding: 10px;
            border-bottom: 2px solid #00ffcc;
        }

        .chat-header h1 {
            font-size: 20px;
            color: #00ffcc;
            letter-spacing: 2px;
        }

        /* Chat Box */
        .chat-box {
            padding: 10px;
            flex: 1;
            overflow-y: auto;
            color: #e1e1e1;
            background: linear-gradient(145deg, #003f3c, #001b1a);
        }

        .chat-message {
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 5px;
            word-break: break-word;
            background-color: rgba(0, 255, 204, 0.2);
        }

        .chat-message.user {
            align-self: flex-end;
            background-color: rgba(255, 0, 255, 0.2);
        }

        /* Chat Input Container */
        .chat-input-container {
            display: flex;
            padding: 10px;
            background-color: #001b1a;
            border-top: 2px solid #00ffcc;
        }
        #chat-input {
            flex: 1;
            padding: 10px;
            background-color: transparent;
            color: #00ffcc;
            border: 1px solid #00ffcc;
            outline: none;
            font-size: 16px;
            border-radius: 5px;
        }
        #send-btn {
            background-color: #00ffcc;
            color: #001b1a;
            padding: 10px 15px;
            border: none;
            margin-left: 10px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        #send-btn:hover {
            background-color: #009f99;
        }
        .chat-box::-webkit-scrollbar {
            width: 6px;
        }
        .chat-box::-webkit-scrollbar-thumb {
            background-color: #00ffcc;
            border-radius: 3px;
        }
     </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1>AI Chat - Cyberpunk Style</h1>
        </div>
        <div class="chat-box" id="chat-box">
            <div class="chat-message user">Welcome to the cyber chat!</div>
        </div>
        <div class="chat-input-container">
            <input type="text" id="chat-input" placeholder="Type your message..." autofocus>
            <button id="send-btn">Send</button>
        </div>
    </div>
    <!-- <script src="script.js"></script> -->
     <script>
        const chatInput = document.getElementById('chat-input');
        const chatBox = document.getElementById('chat-box');
        const sendBtn = document.getElementById('send-btn');
        const apiKey = 'sk-2d8669e6da454cb5a016e8ad537b0d1c'; // 替换成你的 Deepseek API 密钥

        // 发送消息并在聊天框中显示 AI 回复
        async function sendMessage() {
            const message = chatInput.value.trim();
            if (message === '') return;
            
            // 显示用户的消息
            const userMessage = document.createElement('div');
            userMessage.classList.add('chat-message', 'user');
            userMessage.textContent = message;
            chatBox.appendChild(userMessage);
            
            // 获取 AI 回复
            const aiReply = await getAIResponse(message);
            
            // 显示 AI 的回复
            const aiMessage = document.createElement('div');
            aiMessage.classList.add('chat-message');
            aiMessage.textContent = aiReply;
            chatBox.appendChild(aiMessage);
            
            // 滚动到聊天框底部
            chatBox.scrollTop = chatBox.scrollHeight;
            
            // 清空输入框
            chatInput.value = '';
        }

        // 监听输入框的回车键
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // 监听发送按钮的点击事件
        sendBtn.addEventListener('click', sendMessage);

        // 调用 Deepseek API 获取 AI 回复
        async function getAIResponse(userInput) {
            const apiUrl = 'https://api.deepseek.com/v1'; // 确保这是正确的 API 端点
            const requestBody = {
                model: "deepseek-chat",
                messages: [
                    { role: "system", content: "You are a helpful assistant." },
                    { role: "user", content: userInput }
                ],
                stream: false
            };
            
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}` // 使用 Bearer 令牌
                    },
                    body: JSON.stringify(requestBody)
                });
                
                if (!response.ok) {
                    throw new Error(`Error: ${response.statusText}`);
                }
                
                const data = await response.json();
                const aiMessage = data.choices[0].message.content;
                return aiMessage;
            } catch (error) {
                console.error('Error fetching AI response:', error);
                return "Error: Unable to get a response from AI.";
            }
        }
     </script>
</body>
</html>
