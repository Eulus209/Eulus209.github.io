<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="Eulus"><meta name="copyright" content="Eulus"><meta name="generator" content="Hexo 7.3.0"><meta name="theme" content="hexo-theme-yun"><title>C++算法基础 | Eulus's Blog</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="icon" type="image/png" href="/favicon.ico"><link rel="mask-icon" href="/favicon.ico" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"elaina-1017.xyz","root":"/","title":"魔女之旅","version":"1.10.11","mode":"light","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"搜索...","empty":"找不到您查询的内容: ${query}","hits":"找到 ${hits} 条结果","hits_time":"找到 ${hits} 条结果（用时 ${time} 毫秒）"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"local_search":{"path":"/search.xml"},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"fireworks":{"colors":["102, 167, 221","62, 131, 225","33, 78, 194"]},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><meta name="description" content="算法基础课第一讲：前缀和与差分 竞赛语法 cin和cout  ios::sycn_with_stdio(0),cin.tie(0),cout.tie(0);清除cin和cout的同步流尽量不要用endl,endl&#x3D;&#x27;\n&#x27;+刷新同步流   开long long   用#define int long long时,int main()要改成signed main() 常用usin">
<meta property="og:type" content="article">
<meta property="og:title" content="C++算法基础">
<meta property="og:url" content="http://elaina-1017.xyz/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/index.html">
<meta property="og:site_name" content="Eulus&#39;s Blog">
<meta property="og:description" content="算法基础课第一讲：前缀和与差分 竞赛语法 cin和cout  ios::sycn_with_stdio(0),cin.tie(0),cout.tie(0);清除cin和cout的同步流尽量不要用endl,endl&#x3D;&#x27;\n&#x27;+刷新同步流   开long long   用#define int long long时,int main()要改成signed main() 常用usin">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://elaina-1017.xyz/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/kotomi.webp">
<meta property="og:image" content="http://elaina-1017.xyz/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/image-20241019233204362.png">
<meta property="og:image" content="http://elaina-1017.xyz/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/image-20241019233012873.png">
<meta property="og:image" content="http://elaina-1017.xyz/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/hoshinoai.png">
<meta property="article:published_time" content="2024-10-19T04:15:20.000Z">
<meta property="article:modified_time" content="2024-10-19T15:58:12.453Z">
<meta property="article:author" content="Eulus">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://elaina-1017.xyz/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/kotomi.webp"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="文章目录"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="站点概览"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="Eulus"><img width="96" loading="lazy" src="/./images/elaina.jpg" alt="Eulus"></a><div class="site-author-name"><a href="/about/">Eulus</a></div><span class="site-name">Eulus's Blog</span><sub class="site-subtitle"></sub><div class="site-description">天若有情天亦老，人间正道是沧桑!</div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="首页"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="归档"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">12</span></a></div><div class="site-state-item"><a href="/categories/" title="分类"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">3</span></a></div><div class="site-state-item"><a href="/tags/" title="标签"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">8</span></a></div><a class="site-state-item hty-icon-button" target="_blank" rel="noopener" href="https://mzh.moegirl.org.cn/%E4%BC%8A%E8%95%BE%E5%A8%9C" title="伊蕾娜"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:clipboard-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" target="_blank" rel="noopener" href="https://space.bilibili.com/382479581?spm_id_from=333.1365.0.0" title="哔哩哔哩" style="color:#FF8EB3"><span class="icon iconify" data-icon="ri:bilibili-line"></span></a><a class="links-item hty-icon-button" target="_blank" rel="noopener" href="https://github.com/Eulus209" title="github" style="color:#181717"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-item hty-icon-button" href="/girls/" title="喜欢的女孩子" style="color:hotpink"><span class="icon iconify" data-icon="ri:women-line"></span></a></div></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE"><span class="toc-number">1.</span> <span class="toc-text">算法基础课</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%AE%B2%EF%BC%9A%E5%89%8D%E7%BC%80%E5%92%8C%E4%B8%8E%E5%B7%AE%E5%88%86"><span class="toc-number">2.</span> <span class="toc-text">第一讲：前缀和与差分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AB%9E%E8%B5%9B%E8%AF%AD%E6%B3%95"><span class="toc-number">2.1.</span> <span class="toc-text">竞赛语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-number">2.2.</span> <span class="toc-text">知识点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%89%8D%E7%BC%80%E5%92%8C"><span class="toc-number">2.2.1.</span> <span class="toc-text">前缀和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E7%BB%B4%E5%89%8D%E7%BC%80%E5%92%8C"><span class="toc-number">2.2.2.</span> <span class="toc-text">二维前缀和</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%AE%E5%88%86"><span class="toc-number">2.2.3.</span> <span class="toc-text">差分</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E7%BB%B4%E5%B7%AE%E5%88%86"><span class="toc-number">2.2.4.</span> <span class="toc-text">二维差分</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%A0%E9%A2%981%E5%89%8D%E7%BC%80%E5%92%8C"><span class="toc-number">2.3.</span> <span class="toc-text">习题1前缀和</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.3.1.</span> <span class="toc-text">题目描述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">输入描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%8F%8F%E8%BF%B0"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">输出描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%A0%B7%E4%BE%8B1"><span class="toc-number">2.3.1.3.</span> <span class="toc-text">输入样例1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B1"><span class="toc-number">2.3.1.4.</span> <span class="toc-text">输出样例1</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">2.3.2.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B2%E8%A7%A3"><span class="toc-number">2.3.3.</span> <span class="toc-text">知识点讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%89%8D%E7%BC%80%E5%92%8C"><span class="toc-number">2.3.3.1.</span> <span class="toc-text">1. 前缀和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E9%80%BB%E8%BE%91"><span class="toc-number">2.3.3.2.</span> <span class="toc-text">2. 代码逻辑</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90"><span class="toc-number">2.3.4.</span> <span class="toc-text">复杂度分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%A0%E9%A2%982%E5%B7%AE%E5%88%86"><span class="toc-number">2.4.</span> <span class="toc-text">习题2差分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-1"><span class="toc-number">2.4.1.</span> <span class="toc-text">题目描述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%8F%8F%E8%BF%B0-1"><span class="toc-number">2.4.1.1.</span> <span class="toc-text">输入描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%8F%8F%E8%BF%B0-1"><span class="toc-number">2.4.1.2.</span> <span class="toc-text">输出描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%A0%B7%E4%BE%8B1-1"><span class="toc-number">2.4.1.3.</span> <span class="toc-text">输入样例1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B1-1"><span class="toc-number">2.4.1.4.</span> <span class="toc-text">输出样例1</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81-1"><span class="toc-number">2.4.2.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B2%E8%A7%A3-1"><span class="toc-number">2.4.3.</span> <span class="toc-text">知识点讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%B7%AE%E5%88%86%E6%95%B0%E7%BB%84"><span class="toc-number">2.4.3.1.</span> <span class="toc-text">1. 差分数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%89%8D%E7%BC%80%E5%92%8C"><span class="toc-number">2.4.3.2.</span> <span class="toc-text">2. 前缀和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BB%A3%E7%A0%81%E9%80%BB%E8%BE%91"><span class="toc-number">2.4.3.3.</span> <span class="toc-text">3. 代码逻辑</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90-1"><span class="toc-number">2.4.4.</span> <span class="toc-text">复杂度分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%A0%E9%A2%983%E4%BA%8C%E7%BB%B4%E5%89%8D%E7%BC%80%E5%92%8C"><span class="toc-number">2.5.</span> <span class="toc-text">习题3二维前缀和</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-2"><span class="toc-number">2.5.1.</span> <span class="toc-text">题目描述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.5.1.1.</span> <span class="toc-text">输入格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.5.1.2.</span> <span class="toc-text">输出格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B7%E4%BE%8B%E8%BE%93%E5%85%A51"><span class="toc-number">2.5.1.3.</span> <span class="toc-text">样例输入1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B7%E4%BE%8B%E8%BE%93%E5%87%BA1"><span class="toc-number">2.5.1.4.</span> <span class="toc-text">样例输出1</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81-2"><span class="toc-number">2.5.2.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B2%E8%A7%A3-2"><span class="toc-number">2.5.3.</span> <span class="toc-text">知识点讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BA%8C%E7%BB%B4%E5%89%8D%E7%BC%80%E5%92%8C"><span class="toc-number">2.5.3.1.</span> <span class="toc-text">1. 二维前缀和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E9%80%BB%E8%BE%91-1"><span class="toc-number">2.5.3.2.</span> <span class="toc-text">2. 代码逻辑</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90-2"><span class="toc-number">2.5.4.</span> <span class="toc-text">复杂度分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%A0%E9%A2%984%E9%BC%A0%E9%BC%A0%E6%88%91%E9%B8%AD"><span class="toc-number">2.6.</span> <span class="toc-text">习题4鼠鼠我鸭</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-3"><span class="toc-number">2.6.1.</span> <span class="toc-text">题目描述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F-1"><span class="toc-number">2.6.1.1.</span> <span class="toc-text">输入格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F-1"><span class="toc-number">2.6.1.2.</span> <span class="toc-text">输出格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B7%E4%BE%8B%E8%BE%93%E5%85%A51-1"><span class="toc-number">2.6.1.3.</span> <span class="toc-text">样例输入1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B7%E4%BE%8B%E8%BE%93%E5%87%BA1-1"><span class="toc-number">2.6.1.4.</span> <span class="toc-text">样例输出1</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81-3"><span class="toc-number">2.6.2.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B2%E8%A7%A3-3"><span class="toc-number">2.6.3.</span> <span class="toc-text">知识点讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%89%8D%E7%BC%80%E5%92%8C-1"><span class="toc-number">2.6.3.1.</span> <span class="toc-text">1. 前缀和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E9%80%BB%E8%BE%91-2"><span class="toc-number">2.6.3.2.</span> <span class="toc-text">2. 代码逻辑</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90-3"><span class="toc-number">2.6.4.</span> <span class="toc-text">复杂度分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%A0%E9%A2%985%E4%BA%8C%E7%BB%B4%E5%B7%AE%E5%88%86"><span class="toc-number">2.7.</span> <span class="toc-text">习题5二维差分</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-4"><span class="toc-number">2.7.1.</span> <span class="toc-text">题目描述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%8F%8F%E8%BF%B0-2"><span class="toc-number">2.7.1.1.</span> <span class="toc-text">输入描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%8F%8F%E8%BF%B0-2"><span class="toc-number">2.7.1.2.</span> <span class="toc-text">输出描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%A0%B7%E4%BE%8B1-2"><span class="toc-number">2.7.1.3.</span> <span class="toc-text">输入样例1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%A0%B7%E4%BE%8B1-2"><span class="toc-number">2.7.1.4.</span> <span class="toc-text">输出样例1</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81-4"><span class="toc-number">2.7.2.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%B2%E8%A7%A3-4"><span class="toc-number">2.7.3.</span> <span class="toc-text">知识点讲解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BA%8C%E7%BB%B4%E5%B7%AE%E5%88%86%E6%95%B0%E7%BB%84"><span class="toc-number">2.7.3.1.</span> <span class="toc-text">1. 二维差分数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E9%80%BB%E8%BE%91-3"><span class="toc-number">2.7.3.2.</span> <span class="toc-text">2. 代码逻辑</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90-4"><span class="toc-number">2.7.4.</span> <span class="toc-text">复杂度分析</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%AE%B2%EF%BC%9A%E4%BD%8D%E8%BF%90%E7%AE%97%E5%8F%8C%E6%8C%87%E9%92%88%E6%8E%92%E5%BA%8F%E4%BA%8C%E5%88%86"><span class="toc-number">3.</span> <span class="toc-text">第二讲：位运算双指针排序二分</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%A0%E9%A2%98"><span class="toc-number">3.1.</span> <span class="toc-text">习题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E6%8F%8F%E8%BF%B0-5"><span class="toc-number">3.1.1.</span> <span class="toc-text">题目描述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%8F%8F%E8%BF%B0-3"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">输入描述</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div class="tag-cloud"><div class="tag-cloud-tags"><a href="/tags/C/" style="font-size: 12px; color: #999">C++</a> <a href="/tags/vue/" style="font-size: 21px; color: #4d89c0">vue</a> <a href="/tags/%E5%8A%A8%E6%BC%AB/" style="font-size: 30px; color: #0078e7">动漫</a> <a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 12px; color: #999">学习</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 12px; color: #999">数据库</a></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="http://elaina-1017.xyz/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="Eulus"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="Eulus's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">C++算法基础</h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <span class="post-meta-icon-text">发表于</span> <time title="创建时间：2024-10-19 12:15:20" itemprop="dateCreated datePublished" datetime="2024-10-19T12:15:20+08:00">2024-10-19</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="本文字数"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="本文字数">5.5k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="阅读时长"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="阅读时长">23m</span></span></span><div class="post-classify"><span class="post-tag"><a class="tag-item" href="/tags/C/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">C++</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h1 id="算法基础课"><a href="#算法基础课" class="headerlink" title="算法基础课"></a>算法基础课</h1><h1 id="第一讲：前缀和与差分"><a href="#第一讲：前缀和与差分" class="headerlink" title="第一讲：前缀和与差分"></a>第一讲：前缀和与差分</h1><p><img src="/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/kotomi.webp" alt="kotomi" loading="lazy"></p>
<h2 id="竞赛语法"><a href="#竞赛语法" class="headerlink" title="竞赛语法"></a>竞赛语法</h2><ol>
<li>cin和cout</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">ios::<span class="built_in">sycn_with_stdio</span>(<span class="number">0</span>),cin.<span class="built_in">tie</span>(<span class="number">0</span>),cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">清除cin和cout的同步流</span><br><span class="line">尽量不要用endl,endl=<span class="string">&#x27;\n&#x27;</span>+刷新同步流</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>开long long</li>
</ol>
<blockquote>
<p>用#define int long long时,int main()要改成signed main()</p>
<p>常用using ll &#x3D; long long;</p>
</blockquote>
<ol start="3">
<li>确定N不要用define</li>
</ol>
<blockquote>
<p>#define N 1e5+10要加大括号,即,#define N (1e5+10)</p>
<p>尽量用const int N &#x3D; 1e5+10;</p>
</blockquote>
<ol start="3">
<li>输入的循环尽量单独写</li>
</ol>
<blockquote>
<p>for(int i&#x3D;0;i&lt;n;++i)cin&gt;&gt;a[i];</p>
</blockquote>
<h2 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h2><h3 id="前缀和"><a href="#前缀和" class="headerlink" title="前缀和"></a>前缀和</h3><p>前缀和数组从<code>a[1]</code>开始</p>
<p>需要开辟一个比原数组的大小大一个内存的数组</p>
<p>它的每一个元素意义是：<strong>前原数组n个元素的总和</strong>。也就是说下标为3的元素，是原来前三个元素的和。（也可以理解为除了自己以外的前面元素的和）</p>
<blockquote>
<blockquote>
<p>公式: sum[i]&#x3D;arr[i−1]+sum[i−1]</p>
</blockquote>
</blockquote>
<p><img src="/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/image-20241019233204362.png" alt="image-20241019233204362" loading="lazy"></p>
<h3 id="二维前缀和"><a href="#二维前缀和" class="headerlink" title="二维前缀和"></a>二维前缀和</h3><p>二维前缀和相对于一维复杂的多，它也需要多开辟空间，不同的是他是在每个维度都要多开辟一个。</p>
<p>它每个元素的意义是：<strong>下标为(x,y)的求和数组的元素，是原数组下标（0,0）到（x - 1, y - 1）子矩阵内元素的和</strong>。</p>
<blockquote>
<p> 公式: sum[x][y]&#x3D;sum[x−1][y]+sum[x][y−1]−sum[x−1][y−1]+arr[x−1][y−1]</p>
</blockquote>
<p><img src="/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/image-20241019233012873.png" alt="image-20241019233012873" loading="lazy"></p>
<h3 id="差分"><a href="#差分" class="headerlink" title="差分"></a>差分</h3><p>差分是一种在算法竞赛中常用的技巧，主要用于处理区间修改和查询问题。差分的核心思想是通过对数组进行预处理，将区间操作转化为单点操作，从而简化问题的复杂度。</p>
<p>假设我们有一个数组 <code>A</code>，长度为 <code>n</code>，我们定义一个新的数组 <code>D</code>，称为差分数组，其中 <code>D[i]</code> 表示 <code>A[i]</code> 与 <code>A[i-1]</code> 的差值，即：</p>
<p>D[i]&#x3D;A[i]−A[i−1]</p>
<p>特别地，我们定义 <code>D[0] = A[0]</code></p>
<p><strong>差分数组的应用</strong></p>
<p>差分数组的主要应用在于区间修改操作。假设我们需要对数组 <code>A</code> 的某个区间 <code>[l, r]</code> 中的所有元素加上一个值 <code>x</code>，我们可以通过修改差分数组 <code>D</code> 来实现：</p>
<ul>
<li>将 <code>D[l]</code> 加上 <code>x</code>，表示从 <code>A[l]</code> 开始的所有元素都加上 <code>x</code>。</li>
<li>将 <code>D[r+1]</code> 减去 <code>x</code>，表示从 <code>A[r+1]</code> 开始的所有元素都减去 <code>x</code>，从而抵消之前的影响。</li>
</ul>
<h3 id="二维差分"><a href="#二维差分" class="headerlink" title="二维差分"></a>二维差分</h3><p>二维差分是一种在处理二维数组区间修改和查询问题时常用的技巧。与一维差分类似，二维差分的核心思想是通过对二维数组进行预处理，将区间操作转化为单点操作，从而简化问题的复杂度。</p>
<p><strong>基本概念</strong></p>
<p>假设我们有一个二维数组 <code>A</code>，大小为 <code>n x m</code>，我们定义一个新的二维数组 <code>D</code>，称为差分数组，其中 <code>D[i][j]</code> 表示 <code>A[i][j]</code> 与 <code>A[i-1][j]</code> 和 <code>A[i][j-1]</code> 的差值，即：</p>
<p><code>D[i][j]=A[i][j]−A[i−1][j]−A[i][j−1]+A[i−1][j−1]</code></p>
<p>二维差分数组的主要应用在于二维区间修改操作。假设我们需要对二维数组 <code>A</code> 的某个子矩阵 <code>[x1, y1, x2, y2]</code> 中的所有元素加上一个值 <code>x</code>，我们可以通过修改差分数组 <code>D</code> 来实现：</p>
<ul>
<li>将 <code>D[x1][y1]</code> 加上 <code>x</code>，表示从 <code>A[x1][y1]</code> 开始的所有元素都加上 <code>x</code>。</li>
<li>将 <code>D[x1][y2+1]</code> 减去 <code>x</code>，表示从 <code>A[x1][y2+1]</code> 开始的所有元素都减去 <code>x</code>。</li>
<li>将 <code>D[x2+1][y1]</code> 减去 <code>x</code>，表示从 <code>A[x2+1][y1]</code> 开始的所有元素都减去 <code>x</code>。</li>
<li>将 <code>D[x2+1][y2+1]</code> 加上 <code>x</code>，表示从 <code>A[x2+1][y2+1]</code> 开始的所有元素都加上 <code>x</code>。</li>
</ul>
<h2 id="习题1前缀和"><a href="#习题1前缀和" class="headerlink" title="习题1前缀和"></a>习题1<strong>前缀和</strong></h2><h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><blockquote>
<p>给定义一个数组a，有q+1次询问，对于每次询问：</p>
<p>给定两个整数l,r，求出a<del>l</del>+a<del>l+1</del>+…+a<del>r</del>的结果。</p>
</blockquote>
<h4 id="输入描述"><a href="#输入描述" class="headerlink" title="输入描述"></a>输入描述</h4><blockquote>
<p>第一行一个整数表示样例个数T(1≤T≤10)。</p>
<p>对于每组样例：</p>
<p>第一行2个整数n(1≤n≤10^5^),q(1≤q≤10^5^)，分别表示数组长度和询问次数。</p>
<p>第二行n个整数，表示数组a(−10^9^≤a<del>i</del>≤10^9^)。</p>
<p>接下来q行，每行两个整数l,r(1≤l≤r≤n)表示询问的区间。</p>
</blockquote>
<h4 id="输出描述"><a href="#输出描述" class="headerlink" title="输出描述"></a>输出描述</h4><blockquote>
<p>对于每组样例，一行一个整数表示答案。</p>
</blockquote>
<h4 id="输入样例1"><a href="#输入样例1" class="headerlink" title="输入样例1"></a>输入样例1</h4><figure class="highlight tap"><table><tr><td class="code"><pre><span class="line">2</span><br><span class="line">5 3</span><br><span class="line">1<span class="number"> 2 </span>3<span class="number"> 4 </span>5</span><br><span class="line">1 2</span><br><span class="line">2 5</span><br><span class="line">3 4</span><br><span class="line">7 2</span><br><span class="line">-1<span class="number"> 9 </span>-10<span class="number"> 8 </span>2<span class="number"> 6 </span>11</span><br><span class="line">1 5</span><br><span class="line">2 7</span><br></pre></td></tr></table></figure>

<h4 id="输出样例1"><a href="#输出样例1" class="headerlink" title="输出样例1"></a>输出样例1</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">3</span><br><span class="line">14</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">26</span><br></pre></td></tr></table></figure>

<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="comment">// 定义常量 N，表示数组的最大长度</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="comment">// 定义数组 a 和前缀和数组 pr</span></span><br><span class="line">ll a[N], pr[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 关闭同步流，加快输入输出速度</span></span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>), cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 读取测试用例的数量 T</span></span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    cin &gt;&gt; T;</span><br><span class="line">    <span class="comment">// 处理每个测试用例</span></span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="comment">// 读取数组长度 n 和查询次数 q</span></span><br><span class="line">        <span class="type">int</span> n, q;</span><br><span class="line">        cin &gt;&gt; n &gt;&gt; q;</span><br><span class="line">        <span class="comment">// 读取数组 a 的元素</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i];</span><br><span class="line">        <span class="comment">// 构建前缀和数组 pr</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) pr[i] = pr[i - <span class="number">1</span>] + a[i];</span><br><span class="line">        <span class="comment">// 处理 q 次区间查询操作</span></span><br><span class="line">        <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">            <span class="type">int</span> l, r;</span><br><span class="line">            cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">            <span class="comment">// 通过前缀和数组计算区间和并输出</span></span><br><span class="line">            cout &lt;&lt; pr[r] - pr[l - <span class="number">1</span>] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="知识点讲解"><a href="#知识点讲解" class="headerlink" title="知识点讲解"></a>知识点讲解</h3><h4 id="1-前缀和"><a href="#1-前缀和" class="headerlink" title="1. 前缀和"></a>1. 前缀和</h4><p>前缀和（Prefix Sum）是一种用于快速计算数组中某个区间和的技术。对于一个数组 <code>a</code>，其前缀和数组 <code>pr</code> 定义如下：</p>
<ul>
<li><code>pr[i]</code> 表示数组 <code>a</code> 中从第 0 个元素到第 <code>i</code> 个元素的和，即 <code>pr[i] = a[0] + a[1] + ... + a[i]</code>。</li>
</ul>
<p>通过前缀和数组，可以在常数时间内计算任意区间的和：</p>
<ul>
<li><code>sum[l, r] = pr[r] - pr[l-1]</code>（假设 <code>l &gt; 0</code>）。</li>
<li>如果 <code>l = 0</code>，则 <code>sum[0, r] = pr[r]</code>。</li>
</ul>
<h4 id="2-代码逻辑"><a href="#2-代码逻辑" class="headerlink" title="2. 代码逻辑"></a>2. 代码逻辑</h4><ol>
<li><strong>输入处理</strong>：<ul>
<li>读取测试用例的数量 <code>T</code>。</li>
<li>对于每个测试用例，读取数组长度 <code>n</code> 和查询次数 <code>q</code>。</li>
<li>读取数组 <code>a</code> 的元素。</li>
</ul>
</li>
<li><strong>构建前缀和数组</strong>：<ul>
<li>通过数组 <code>a</code> 构建前缀和数组 <code>pr</code>。</li>
</ul>
</li>
<li><strong>区间查询</strong>：<ul>
<li>对于每个区间查询操作 <code>[l, r]</code>，通过前缀和数组计算区间和并输出。</li>
</ul>
</li>
</ol>
<h3 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><ul>
<li><strong>时间复杂度</strong>：<ul>
<li>构建前缀和数组的时间复杂度为 <code>O(n)</code>。</li>
<li>区间查询的时间复杂度为 <code>O(1)</code>。</li>
<li>因此，总的时间复杂度为 <code>O(T * (n + q))</code>，其中 <code>T</code> 是测试用例的数量。</li>
</ul>
</li>
<li><strong>空间复杂度</strong>：<ul>
<li>使用了一个前缀和数组 <code>pr</code>，空间复杂度为 <code>O(n)</code>。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="习题2差分"><a href="#习题2差分" class="headerlink" title="习题2差分"></a>习题2<strong>差分</strong></h2><h3 id="题目描述-1"><a href="#题目描述-1" class="headerlink" title="题目描述"></a>题目描述</h3><blockquote>
<p>给定一个长度为n的数组a，和两个整数p,q。</p>
<p>先进行p次区间加操作：将区间[l,r]的数字都加上x。</p>
<p>再进行q次区间查询操作：求出[l,r]的数字之和。</p>
<p>对于每次区间查询操作，输出结果。</p>
</blockquote>
<h4 id="输入描述-1"><a href="#输入描述-1" class="headerlink" title="输入描述"></a>输入描述</h4><blockquote>
<p>第一行三个整数n,p,q。(1≤n≤10^5^,0≤p≤10^5^,0≤10^5^≤q)</p>
<p>第二行n个整数表示数组a。(−10^9^≤a<del>i</del>≤10^9^)</p>
<p>接下来p行，每行三个整数l,r,x。(1≤l≤r≤n,−10^9^≤x≤10^9^)</p>
<p>接下来q行，每行两个整数l,r。(1≤l≤r≤n)</p>
</blockquote>
<h4 id="输出描述-1"><a href="#输出描述-1" class="headerlink" title="输出描述"></a>输出描述</h4><blockquote>
<p>对于每次区间查询操作，输出结果。</p>
</blockquote>
<h4 id="输入样例1-1"><a href="#输入样例1-1" class="headerlink" title="输入样例1"></a>输入样例1</h4><figure class="highlight basic"><table><tr><td class="code"><pre><span class="line"><span class="symbol">5 </span><span class="number">1</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">1 </span><span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">1 </span><span class="number">4</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">1 </span><span class="number">3</span></span><br><span class="line"><span class="symbol">1 </span><span class="number">5</span></span><br></pre></td></tr></table></figure>

<h4 id="输出样例1-1"><a href="#输出样例1-1" class="headerlink" title="输出样例1"></a>输出样例1</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">9</span><br><span class="line">15</span><br></pre></td></tr></table></figure>

<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="comment">// 定义常量 N，表示数组的最大长度</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"><span class="comment">// 定义数组 a, d, pre</span></span><br><span class="line">ll a[N], d[N], pre[N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 关闭同步流，加快输入输出速度</span></span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>), cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 读取输入的 n, p, q</span></span><br><span class="line">    <span class="type">int</span> n, p, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; p &gt;&gt; q;</span><br><span class="line">    <span class="comment">// 读取数组 a 的元素</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i];</span><br><span class="line">    <span class="comment">// 构建差分数组 d</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) d[i] = a[i] - a[i - <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// 处理 p 次区间修改操作</span></span><br><span class="line">    <span class="keyword">while</span> (p--) &#123;</span><br><span class="line">        <span class="type">int</span> l, r, x;</span><br><span class="line">        cin &gt;&gt; l &gt;&gt; r &gt;&gt; x;</span><br><span class="line">        <span class="comment">// 在差分数组上进行区间修改</span></span><br><span class="line">        d[l] += x;</span><br><span class="line">        d[r + <span class="number">1</span>] -= x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 通过差分数组还原数组 a</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) a[i] = a[i - <span class="number">1</span>] + d[i];</span><br><span class="line">    <span class="comment">// 构建前缀和数组 pre</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) pre[i] = pre[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    <span class="comment">// 处理 q 次区间查询操作</span></span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="type">int</span> l, r;</span><br><span class="line">        cin &gt;&gt; l &gt;&gt; r;</span><br><span class="line">        <span class="comment">// 通过前缀和数组计算区间和</span></span><br><span class="line">        cout &lt;&lt; pre[r] - pre[l - <span class="number">1</span>] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="知识点讲解-1"><a href="#知识点讲解-1" class="headerlink" title="知识点讲解"></a>知识点讲解</h3><h4 id="1-差分数组"><a href="#1-差分数组" class="headerlink" title="1. 差分数组"></a>1. 差分数组</h4><p>差分数组（Difference Array）是一种用于快速对数组进行区间修改的技术。对于一个数组 <code>a</code>，其差分数组 <code>d</code> 定义如下：</p>
<ul>
<li><code>d[i] = a[i] - a[i-1]</code>（假设 <code>i &gt; 0</code>）。</li>
<li><code>d[0] = a[0]</code>。</li>
</ul>
<p>差分数组的优点在于，可以通过对差分数组进行简单的修改来实现对原数组的区间修改。例如，对区间 <code>[l, r]</code> 加上 <code>x</code>，只需要在差分数组上进行如下操作：</p>
<ul>
<li><code>d[l] += x</code></li>
<li><code>d[r+1] -= x</code></li>
</ul>
<p>然后通过差分数组还原原数组：</p>
<ul>
<li><code>a[i] = a[i-1] + d[i]</code></li>
</ul>
<h4 id="2-前缀和"><a href="#2-前缀和" class="headerlink" title="2. 前缀和"></a>2. 前缀和</h4><p>前缀和（Prefix Sum）是一种用于快速计算数组中某个区间和的技术。对于一个数组 <code>a</code>，其前缀和数组 <code>pre</code> 定义如下：</p>
<ul>
<li><code>pre[i]</code> 表示数组 <code>a</code> 中从第 0 个元素到第 <code>i</code> 个元素的和，即 <code>pre[i] = a[0] + a[1] + ... + a[i]</code>。</li>
</ul>
<p>通过前缀和数组，可以在常数时间内计算任意区间的和：</p>
<ul>
<li><code>sum[l, r] = pre[r] - pre[l-1]</code>（假设 <code>l &gt; 0</code>）。</li>
<li>如果 <code>l = 0</code>，则 <code>sum[0, r] = pre[r]</code>。</li>
</ul>
<h4 id="3-代码逻辑"><a href="#3-代码逻辑" class="headerlink" title="3. 代码逻辑"></a>3. 代码逻辑</h4><ol>
<li><strong>输入处理</strong>：<ul>
<li>读取数组长度 <code>n</code>，区间修改操作次数 <code>p</code>，区间查询操作次数 <code>q</code>。</li>
<li>读取数组 <code>a</code> 的元素。</li>
</ul>
</li>
<li><strong>构建差分数组</strong>：<ul>
<li>通过数组 <code>a</code> 构建差分数组 <code>d</code>。</li>
</ul>
</li>
<li><strong>区间修改</strong>：<ul>
<li>对于每个区间修改操作 <code>[l, r]</code> 加上 <code>x</code>，在差分数组上进行相应修改。</li>
</ul>
</li>
<li><strong>还原数组</strong>：<ul>
<li>通过差分数组 <code>d</code> 还原数组 <code>a</code>。</li>
</ul>
</li>
<li><strong>构建前缀和数组</strong>：<ul>
<li>通过数组 <code>a</code> 构建前缀和数组 <code>pre</code>。</li>
</ul>
</li>
<li><strong>区间查询</strong>：<ul>
<li>对于每个区间查询操作 <code>[l, r]</code>，通过前缀和数组计算区间和并输出。</li>
</ul>
</li>
</ol>
<h3 id="复杂度分析-1"><a href="#复杂度分析-1" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><ul>
<li><strong>时间复杂度</strong>：<ul>
<li>构建差分数组和前缀和数组的时间复杂度为 <code>O(n)</code>。</li>
<li>区间修改和区间查询的时间复杂度为 <code>O(1)</code>。</li>
<li>因此，总的时间复杂度为 <code>O(n + p + q)</code>。</li>
</ul>
</li>
<li><strong>空间复杂度</strong>：<ul>
<li>使用了一个差分数组 <code>d</code> 和一个前缀和数组 <code>pre</code>，空间复杂度为 <code>O(n)</code>。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="习题3二维前缀和"><a href="#习题3二维前缀和" class="headerlink" title="习题3二维前缀和"></a>习题3<strong>二维前缀和</strong></h2><h3 id="题目描述-2"><a href="#题目描述-2" class="headerlink" title="题目描述"></a>题目描述</h3><blockquote>
<p>给定一个n行m列的整数矩阵。</p>
<p>有q个询问，每个询问格式为：x<del>1</del>,y<del>1</del>,x<del>2</del>,y<del>2</del>，表示一个子矩阵的左上角和右下角的坐标。</p>
<p>对于每个询问，请回答子矩阵的所有数之和。</p>
</blockquote>
<h4 id="输入格式"><a href="#输入格式" class="headerlink" title="输入格式"></a>输入格式</h4><blockquote>
<p>第一行包括三个整数n,m,q（1≤n,m≤10^3^，1≤q≤10^5^）。</p>
<p>接下来n行，每行包括m<em>m</em>个整数，表示整数矩阵（每个整数的取值范围为[1,10^5^]）。</p>
<p>接下来q行，每行包括四个整数x<del>1</del>,y<del>1</del>,x<del>2</del>,y<del>2</del>（1≤x<del>1</del>≤x<del>2</del>≤n，1≤y<del>1</del>≤y<del>2</del>≤m），表示一个询问的左上角、右下角坐标。</p>
</blockquote>
<h4 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h4><blockquote>
<p>共q行，第i（1≤i≤q）行输出第i个询问的结果。</p>
</blockquote>
<h4 id="样例输入1"><a href="#样例输入1" class="headerlink" title="样例输入1"></a>样例输入1</h4><figure class="highlight basic"><table><tr><td class="code"><pre><span class="line"><span class="symbol">7 </span><span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">3 </span><span class="number">5</span> <span class="number">1</span> </span><br><span class="line"><span class="symbol">6 </span><span class="number">2</span> <span class="number">4</span> </span><br><span class="line"><span class="symbol">7 </span><span class="number">9</span> <span class="number">10</span> </span><br><span class="line"><span class="symbol">4 </span><span class="number">3</span> <span class="number">6</span> </span><br><span class="line"><span class="symbol">3 </span><span class="number">9</span> <span class="number">9</span> </span><br><span class="line"><span class="symbol">6 </span><span class="number">10</span> <span class="number">1</span> </span><br><span class="line"><span class="symbol">9 </span><span class="number">10</span> <span class="number">4</span> </span><br><span class="line"><span class="symbol">2 </span><span class="number">2</span> <span class="number">7</span> <span class="number">3</span></span><br><span class="line"><span class="symbol">2 </span><span class="number">1</span> <span class="number">4</span> <span class="number">2</span></span><br></pre></td></tr></table></figure>

<h4 id="样例输出1"><a href="#样例输出1" class="headerlink" title="样例输出1"></a>样例输出1</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">77</span><br><span class="line">31</span><br></pre></td></tr></table></figure>

<h3 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="comment">// 定义常量 N，表示二维数组的最大维度</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e3</span> + <span class="number">9</span>;</span><br><span class="line"><span class="comment">// 定义二维数组 a 和二维前缀和数组 p</span></span><br><span class="line">ll a[N][N], p[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 读取输入的 n, m, q</span></span><br><span class="line">    <span class="type">int</span> n, m, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; q;</span><br><span class="line">    <span class="comment">// 读取二维数组 a 的元素</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            cin &gt;&gt; a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 构建二维前缀和数组 p</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            p[i][j] = p[i - <span class="number">1</span>][j] + p[i][j - <span class="number">1</span>] - p[i - <span class="number">1</span>][j - <span class="number">1</span>] + a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 处理 q 次区间查询操作</span></span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="type">int</span> x1, y1, x2, y2;</span><br><span class="line">        cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2;</span><br><span class="line">        <span class="comment">// 通过二维前缀和数组计算子矩阵的和并输出</span></span><br><span class="line">        cout &lt;&lt; p[x2][y2] - p[x1 - <span class="number">1</span>][y2] - p[x2][y1 - <span class="number">1</span>] + p[x1 - <span class="number">1</span>][y1 - <span class="number">1</span>] &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="知识点讲解-2"><a href="#知识点讲解-2" class="headerlink" title="知识点讲解"></a>知识点讲解</h3><h4 id="1-二维前缀和"><a href="#1-二维前缀和" class="headerlink" title="1. 二维前缀和"></a>1. 二维前缀和</h4><p>二维前缀和（2D Prefix Sum）是一种用于快速计算二维数组中某个子矩阵和的技术。对于一个二维数组 <code>a</code>，其二维前缀和数组 <code>p</code> 定义如下：</p>
<ul>
<li><code>p[i][j]</code> 表示从 <code>(0, 0)</code> 到 <code>(i, j)</code> 的子矩阵的和。</li>
</ul>
<p>构建二维前缀和数组的公式如下：</p>
<ul>
<li><code>p[i][j] = p[i-1][j] + p[i][j-1] - p[i-1][j-1] + a[i][j]</code></li>
</ul>
<p>通过二维前缀和数组，可以在常数时间内计算任意子矩阵的和：</p>
<ul>
<li><code>sum[x1, y1, x2, y2] = p[x2][y2] - p[x1-1][y2] - p[x2][y1-1] + p[x1-1][y1-1]</code></li>
</ul>
<h4 id="2-代码逻辑-1"><a href="#2-代码逻辑-1" class="headerlink" title="2. 代码逻辑"></a>2. 代码逻辑</h4><ol>
<li><strong>输入处理</strong>：<ul>
<li>读取二维数组的维度 <code>n</code> 和 <code>m</code>，以及查询次数 <code>q</code>。</li>
<li>读取二维数组 <code>a</code> 的元素。</li>
</ul>
</li>
<li><strong>构建二维前缀和数组</strong>：<ul>
<li>通过二维数组 <code>a</code> 构建二维前缀和数组 <code>p</code>。</li>
</ul>
</li>
<li><strong>区间查询</strong>：<ul>
<li>对于每个区间查询操作 <code>[x1, y1, x2, y2]</code>，通过二维前缀和数组计算子矩阵的和并输出。</li>
</ul>
</li>
</ol>
<h3 id="复杂度分析-2"><a href="#复杂度分析-2" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><ul>
<li><strong>时间复杂度</strong>：<ul>
<li>构建二维前缀和数组的时间复杂度为 <code>O(n * m)</code>。</li>
<li>区间查询的时间复杂度为 <code>O(1)</code>。</li>
<li>因此，总的时间复杂度为 <code>O(n * m + q)</code>。</li>
</ul>
</li>
<li><strong>空间复杂度</strong>：<ul>
<li>使用了一个二维前缀和数组 <code>p</code>，空间复杂度为 <code>O(n * m)</code>。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="习题4鼠鼠我鸭"><a href="#习题4鼠鼠我鸭" class="headerlink" title="习题4鼠鼠我鸭"></a>习题4<strong>鼠鼠我鸭</strong></h2><h3 id="题目描述-3"><a href="#题目描述-3" class="headerlink" title="题目描述"></a>题目描述</h3><blockquote>
<p>在一个叫做酱西功爷枝叶鸡树学院的地方有n只小动物，要么是鼠鼠，要么是鸭鸭，从1到n编号，每只小动物有个体重a<del>i</del>。</p>
<p>在这个学校里，存在一种神奇的魔法，可以将编号位于某个区间[l,r]内的所有鼠鼠都变为鸭鸭，鸭鸭都变为鼠鼠（魔法并不会改变体重）。</p>
<p>现在你可以施放这个魔法至多1次。（也可以不施放）</p>
<p>问最终鸭鸭的总重量最多是多少？</p>
</blockquote>
<h4 id="输入格式-1"><a href="#输入格式-1" class="headerlink" title="输入格式"></a>输入格式</h4><blockquote>
<p>第一行一个整数T表示样例个数。(1≤T≤10)</p>
<p>对于每个样例：</p>
<p>第一行一个整数n表示小动物的个数。(1≤n≤10^5^)</p>
<p>第二行n个整数，表示第i个小动物的类型。0表示鼠鼠，1表示鸭鸭。</p>
<p>第三行n个整数，表示第i个小动物的体重a<del>i</del>。(1≤a<del>i</del>≤10^9^)</p>
</blockquote>
<h4 id="输出格式-1"><a href="#输出格式-1" class="headerlink" title="输出格式"></a>输出格式</h4><blockquote>
<p>对于每个样例一行一个整数表示答案。</p>
</blockquote>
<h4 id="样例输入1-1"><a href="#样例输入1-1" class="headerlink" title="样例输入1"></a>样例输入1</h4><figure class="highlight basic"><table><tr><td class="code"><pre><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="symbol">0 </span><span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="symbol">1 </span><span class="number">2</span> <span class="number">3</span></span><br><span class="line"><span class="number">4</span></span><br><span class="line"><span class="symbol">0 </span><span class="number">1</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line"><span class="symbol">2 </span><span class="number">5</span> <span class="number">6</span> <span class="number">5</span></span><br></pre></td></tr></table></figure>

<h4 id="样例输出1-1"><a href="#样例输出1-1" class="headerlink" title="样例输出1"></a>样例输出1</h4><figure class="highlight"><table><tr><td class="code"><pre><span class="line">6</span><br><span class="line">16</span><br></pre></td></tr></table></figure>

<blockquote>
<p>解释：第二个样例中，翻转区间[3,4]，使得结果最大为5+6+5&#x3D;16。</p>
</blockquote>
<h3 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="comment">// 定义常量 N，表示数组的最大长度</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e5</span> + <span class="number">9</span>;</span><br><span class="line"><span class="comment">// 定义数组 a, p, w</span></span><br><span class="line">ll a[N], p[N], w[N];</span><br><span class="line"><span class="comment">// 解决问题的主函数</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    <span class="comment">// 读取数组 a 和权重数组 w</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; a[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) cin &gt;&gt; w[i];</span><br><span class="line">    <span class="comment">// 计算数组 a 中元素为 1 和 0 的权重和</span></span><br><span class="line">    ll ess = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) ess += a[i] * w[i];</span><br><span class="line">    <span class="comment">// 初始化最小值 mi 和最大修正值 fix</span></span><br><span class="line">    ll mi = <span class="number">0</span>, fix = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 构建前缀和数组 p，并计算最大修正值 fix</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        p[i] = p[i - <span class="number">1</span>] + (a[i] ? <span class="number">-1</span> : <span class="number">1</span>) * w[i];</span><br><span class="line">        fix = <span class="built_in">max</span>(fix, p[i] - mi);</span><br><span class="line">        mi = <span class="built_in">min</span>(mi, p[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 输出结果</span></span><br><span class="line">    cout &lt;&lt; ess + fix &lt;&lt; <span class="string">&#x27;\n&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 关闭同步流，加快输入输出速度</span></span><br><span class="line">    ios::<span class="built_in">sync_with_stdio</span>(<span class="number">0</span>), cin.<span class="built_in">tie</span>(<span class="number">0</span>), cout.<span class="built_in">tie</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// 读取测试用例的数量 _</span></span><br><span class="line">    <span class="type">int</span> _;</span><br><span class="line">    cin &gt;&gt; _;</span><br><span class="line">    <span class="comment">// 处理每个测试用例</span></span><br><span class="line">    <span class="keyword">while</span> (_--) <span class="built_in">solve</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="知识点讲解-3"><a href="#知识点讲解-3" class="headerlink" title="知识点讲解"></a>知识点讲解</h3><h4 id="1-前缀和-1"><a href="#1-前缀和-1" class="headerlink" title="1. 前缀和"></a>1. 前缀和</h4><p>前缀和（Prefix Sum）是一种用于快速计算数组中某个区间和的技术。对于一个数组 <code>a</code>，其前缀和数组 <code>p</code> 定义如下：</p>
<ul>
<li><code>p[i]</code> 表示数组 <code>a</code> 中从第 0 个元素到第 <code>i</code> 个元素的和，即 <code>p[i] = a[0] + a[1] + ... + a[i]</code>。</li>
</ul>
<p>通过前缀和数组，可以在常数时间内计算任意区间的和：</p>
<ul>
<li><code>sum[l, r] = p[r] - p[l-1]</code>（假设 <code>l &gt; 0</code>）。</li>
<li>如果 <code>l = 0</code>，则 <code>sum[0, r] = p[r]</code>。</li>
</ul>
<h4 id="2-代码逻辑-2"><a href="#2-代码逻辑-2" class="headerlink" title="2. 代码逻辑"></a>2. 代码逻辑</h4><ol>
<li><strong>输入处理</strong>：<ul>
<li>读取数组长度 <code>n</code>。</li>
<li>读取数组 <code>a</code> 和权重数组 <code>w</code>。</li>
</ul>
</li>
<li><strong>计算权重和</strong>：<ul>
<li>计算数组 <code>a</code> 中元素为 <code>1</code> 和 <code>0</code> 的权重和 <code>ess</code>。</li>
</ul>
</li>
<li><strong>构建前缀和数组</strong>：<ul>
<li>构建前缀和数组 <code>p</code>，其中 <code>p[i]</code> 表示从第 1 个元素到第 <code>i</code> 个元素的权重和。</li>
<li>如果 <code>a[i]</code> 为 <code>1</code>，则权重为 <code>-w[i]</code>；如果 <code>a[i]</code> 为 <code>0</code>，则权重为 <code>w[i]</code>。</li>
</ul>
</li>
<li><strong>计算最大修正值</strong>：<ul>
<li>通过前缀和数组 <code>p</code> 计算最大修正值 <code>fix</code>，即 <code>p[i] - mi</code> 的最大值，其中 <code>mi</code> 是 <code>p[i]</code> 的最小值。</li>
</ul>
</li>
<li><strong>输出结果</strong>：<ul>
<li>输出 <code>ess + fix</code>，即最终结果。</li>
</ul>
</li>
</ol>
<h3 id="复杂度分析-3"><a href="#复杂度分析-3" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><ul>
<li><strong>时间复杂度</strong>：<ul>
<li>构建前缀和数组的时间复杂度为 <code>O(n)</code>。</li>
<li>计算最大修正值的时间复杂度为 <code>O(n)</code>。</li>
<li>因此，总的时间复杂度为 <code>O(n)</code>。</li>
</ul>
</li>
<li><strong>空间复杂度</strong>：<ul>
<li>使用了一个前缀和数组 <code>p</code>，空间复杂度为 <code>O(n)</code>。</li>
</ul>
</li>
</ul>
<hr>
<h2 id="习题5二维差分"><a href="#习题5二维差分" class="headerlink" title="习题5二维差分"></a>习题5<strong>二维差分</strong></h2><h3 id="题目描述-4"><a href="#题目描述-4" class="headerlink" title="题目描述"></a>题目描述</h3><blockquote>
<p>给定一个n行m列的整数矩阵。</p>
<p>有q个操作，每个操作格式为：x<del>1</del>，y<del>1</del>，x<del>2</del>，y<del>2</del>，c，其中(x<del>1</del>,y<del>1</del>)、(x<del>2</del>，y<del>2</del>)分别表示一个子矩阵的左上角和右下角的坐标，每个操作将对应的子矩阵的每个元素加上c。</p>
<p>请输出进行完所有操作后的矩阵。</p>
</blockquote>
<h4 id="输入描述-2"><a href="#输入描述-2" class="headerlink" title="输入描述"></a>输入描述</h4><blockquote>
<p>第一行包括三个整数n,m,q（1≤n,m≤10^3^,1≤q≤10^5^）。</p>
</blockquote>
<h4 id="输出描述-2"><a href="#输出描述-2" class="headerlink" title="输出描述"></a>输出描述</h4><blockquote>
<p>共n行，每行包括m个整数，表示进行完所有操作后的矩阵。</p>
</blockquote>
<h4 id="输入样例1-2"><a href="#输入样例1-2" class="headerlink" title="输入样例1"></a>输入样例1</h4><figure class="highlight basic"><table><tr><td class="code"><pre><span class="line"><span class="symbol">4 </span><span class="number">3</span> <span class="number">3</span></span><br><span class="line"><span class="symbol">1 </span><span class="number">5</span> <span class="number">1</span> </span><br><span class="line"><span class="symbol">3 </span><span class="number">3</span> <span class="number">2</span> </span><br><span class="line"><span class="symbol">5 </span><span class="number">3</span> <span class="number">4</span> </span><br><span class="line"><span class="symbol">4 </span><span class="number">4</span> <span class="number">2</span> </span><br><span class="line"><span class="symbol">1 </span><span class="number">2</span> <span class="number">1</span> <span class="number">2</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">2 </span><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">2</span></span><br><span class="line"><span class="symbol">4 </span><span class="number">2</span> <span class="number">4</span> <span class="number">3</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h4 id="输出样例1-2"><a href="#输出样例1-2" class="headerlink" title="输出样例1"></a>输出样例1</h4><figure class="highlight basic"><table><tr><td class="code"><pre><span class="line"><span class="symbol">1 </span><span class="number">7</span> <span class="number">1</span> </span><br><span class="line"><span class="symbol">5 </span><span class="number">5</span> <span class="number">4</span> </span><br><span class="line"><span class="symbol">5 </span><span class="number">3</span> <span class="number">4</span> </span><br><span class="line"><span class="symbol">4 </span><span class="number">5</span> <span class="number">3</span> </span><br></pre></td></tr></table></figure>

<h3 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> ll = <span class="type">long</span> <span class="type">long</span>;</span><br><span class="line"><span class="comment">// 定义常量 N，表示二维数组的最大维度</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> N = <span class="number">1e3</span> + <span class="number">9</span>;</span><br><span class="line"><span class="comment">// 定义二维数组 a, p, d</span></span><br><span class="line">ll a[N][N], p[N][N], d[N][N];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 读取输入的 n, m, q</span></span><br><span class="line">    <span class="type">int</span> n, m, q;</span><br><span class="line">    cin &gt;&gt; n &gt;&gt; m &gt;&gt; q;</span><br><span class="line">    <span class="comment">// 读取二维数组 a 的元素</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            cin &gt;&gt; a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 构建二维差分数组 d</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            d[i][j] += a[i][j];</span><br><span class="line">            d[i + <span class="number">1</span>][j] -= a[i][j];</span><br><span class="line">            d[i][j + <span class="number">1</span>] -= a[i][j];</span><br><span class="line">            d[i + <span class="number">1</span>][j + <span class="number">1</span>] += a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 处理 q 次区间修改操作</span></span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="type">int</span> x1, y1, x2, y2, v;</span><br><span class="line">        cin &gt;&gt; x1 &gt;&gt; y1 &gt;&gt; x2 &gt;&gt; y2 &gt;&gt; v;</span><br><span class="line">        d[x1][y1] += v;</span><br><span class="line">        d[x1][y2 + <span class="number">1</span>] -= v;</span><br><span class="line">        d[x2 + <span class="number">1</span>][y1] -= v;</span><br><span class="line">        d[x2 + <span class="number">1</span>][y2 + <span class="number">1</span>] += v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 通过差分数组还原二维数组 a，并输出</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            a[i][j] = a[i - <span class="number">1</span>][j] + a[i][j - <span class="number">1</span>] - a[i - <span class="number">1</span>][j - <span class="number">1</span>] + d[i][j];</span><br><span class="line">            cout &lt;&lt; a[i][j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="知识点讲解-4"><a href="#知识点讲解-4" class="headerlink" title="知识点讲解"></a>知识点讲解</h3><h4 id="1-二维差分数组"><a href="#1-二维差分数组" class="headerlink" title="1. 二维差分数组"></a>1. 二维差分数组</h4><p>二维差分数组（2D Difference Array）是一种用于快速对二维数组进行区间修改的技术。对于一个二维数组 <code>a</code>，其二维差分数组 <code>d</code> 定义如下：</p>
<ul>
<li><code>d[i][j]</code> 表示从 <code>(i, j)</code> 到 <code>(i+1, j+1)</code> 的子矩阵的差值。</li>
</ul>
<p>构建二维差分数组的公式如下：</p>
<ul>
<li><code>d[i][j] += a[i][j]</code></li>
<li><code>d[i+1][j] -= a[i][j]</code></li>
<li><code>d[i][j+1] -= a[i][j]</code></li>
<li><code>d[i+1][j+1] += a[i][j]</code></li>
</ul>
<p>通过二维差分数组，可以在常数时间内对二维数组进行区间修改。例如，对子矩阵 <code>[x1, y1, x2, y2]</code> 加上 <code>v</code>，只需要在差分数组上进行如下操作：</p>
<ul>
<li><code>d[x1][y1] += v</code></li>
<li><code>d[x1][y2+1] -= v</code></li>
<li><code>d[x2+1][y1] -= v</code></li>
<li><code>d[x2+1][y2+1] += v</code></li>
</ul>
<p>然后通过差分数组还原二维数组：</p>
<ul>
<li><code>a[i][j] = a[i-1][j] + a[i][j-1] - a[i-1][j-1] + d[i][j]</code></li>
</ul>
<h4 id="2-代码逻辑-3"><a href="#2-代码逻辑-3" class="headerlink" title="2. 代码逻辑"></a>2. 代码逻辑</h4><ol>
<li><strong>输入处理</strong>：<ul>
<li>读取二维数组的维度 <code>n</code> 和 <code>m</code>，以及区间修改操作次数 <code>q</code>。</li>
<li>读取二维数组 <code>a</code> 的元素。</li>
</ul>
</li>
<li><strong>构建二维差分数组</strong>：<ul>
<li>通过二维数组 <code>a</code> 构建二维差分数组 <code>d</code>。</li>
</ul>
</li>
<li><strong>区间修改</strong>：<ul>
<li>对于每个区间修改操作 <code>[x1, y1, x2, y2]</code> 加上 <code>v</code>，在差分数组上进行相应修改。</li>
</ul>
</li>
<li><strong>还原二维数组</strong>：<ul>
<li>通过差分数组 <code>d</code> 还原二维数组 <code>a</code>，并输出。</li>
</ul>
</li>
</ol>
<h3 id="复杂度分析-4"><a href="#复杂度分析-4" class="headerlink" title="复杂度分析"></a>复杂度分析</h3><ul>
<li><strong>时间复杂度</strong>：<ul>
<li>构建二维差分数组的时间复杂度为 <code>O(n * m)</code>。</li>
<li>区间修改的时间复杂度为 <code>O(1)</code>。</li>
<li>还原二维数组的时间复杂度为 <code>O(n * m)</code>。</li>
<li>因此，总的时间复杂度为 <code>O(n * m + q)</code>。</li>
</ul>
</li>
<li><strong>空间复杂度</strong>：<ul>
<li>使用了一个二维差分数组 <code>d</code>，空间复杂度为 <code>O(n * m)</code>。</li>
</ul>
</li>
</ul>
<hr>
<hr>
<h1 id="第二讲：位运算双指针排序二分"><a href="#第二讲：位运算双指针排序二分" class="headerlink" title="第二讲：位运算双指针排序二分"></a>第二讲：位运算双指针排序二分</h1><p><img src="/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/hoshinoai.png" alt="hoshinoai" loading="lazy"></p>
<h2 id="习题"><a href="#习题" class="headerlink" title="习题"></a>习题</h2><h3 id="题目描述-5"><a href="#题目描述-5" class="headerlink" title="题目描述"></a>题目描述</h3><blockquote>
</blockquote>
<h4 id="输入描述-3"><a href="#输入描述-3" class="headerlink" title="输入描述"></a>输入描述</h4><figure class="highlight clean"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line"></span><br><span class="line">#### 输出描述</span><br><span class="line"></span><br><span class="line">&gt;</span><br><span class="line"></span><br><span class="line">#### 输入样例<span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">#### 输出样例<span class="number">1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight clean"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">### 代码</span><br><span class="line"></span><br><span class="line">```cpp</span><br></pre></td></tr></table></figure>





























































































</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>Eulus</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="http://elaina-1017.xyz/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/" title="C++算法基础">http://elaina-1017.xyz/posts/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80%E8%AF%BE/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本博客所有文章除特别声明外，均默认采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> 许可协议。</li></ul></article><div class="post-nav"><div class="post-nav-item"></div><div class="post-nav-item"><a class="post-nav-next" href="/posts/%E9%AD%94%E5%A5%B3%E4%B9%8B%E6%97%85/" rel="next" title="魔女之旅"><span class="post-nav-text">魔女之旅</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"></div></main><footer class="sidebar-translate" id="footer"><div class="copyright"><span>&copy; 2024 </span><span class="with-love" id="animate"><span class="icon iconify" data-icon="ri:cloud-line"></span></span><span class="author"> Eulus</span></div><div class="live-time"><span>本博客已萌萌哒地运行</span><span id="display_live_time"></span><span class="moe-text">(●'◡'●)</span><script>function blog_live_time() {
  setTimeout(blog_live_time, 1000);
  const start = new Date('2024-10-11T10:17:00');
  const now = new Date();
  const timeDiff = (now.getTime() - start.getTime());
  const msPerMinute = 60 * 1000;
  const msPerHour = 60 * msPerMinute;
  const msPerDay = 24 * msPerHour;
  const passDay = Math.floor(timeDiff / msPerDay);
  const passHour = Math.floor((timeDiff % msPerDay) / 60 / 60 / 1000);
  const passMinute = Math.floor((timeDiff % msPerHour) / 60 / 1000);
  const passSecond = Math.floor((timeDiff % msPerMinute) / 1000);
  display_live_time.innerHTML = ` ${passDay} 天 ${passHour} 小时 ${passMinute} 分 ${passSecond} 秒`;
}
blog_live_time();
</script></div><div class="footer-custom-text">有资格开枪的，只有做好被射杀觉悟的人而已。</div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="搜索"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script src="https://fastly.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js"></script><script src="/js/search/local-search.js" defer type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..." value=""></div><div class="search-result-container"></div></div><script src="https://fastly.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script>const images = [...document.querySelectorAll('.markdown-body img')]
mediumZoom(images)</script><style>.medium-zoom-image {
  z-index: 99;
}</style></body></html>